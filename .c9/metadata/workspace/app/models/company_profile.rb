{"changed":true,"filter":false,"title":"company_profile.rb","tooltip":"/app/models/company_profile.rb","value":"# == Schema Information\n#\n# Table name: company_profiles\n#\n#  id           :integer          not null, primary key\n#  company_name :string(255)\n#  created_at   :datetime\n#  updated_at   :datetime\n#  balance      :decimal(, )\n#\n\nclass CompanyProfile < ActiveRecord::Base\n    has_many :job_orders\n    has_one :user, as: :profile\n    accepts_nested_attributes_for :user\n    accepts_nested_attributes_for :job_orders\n    \n    # validates_associated :user\n    \n    def name\n        company_name\n    end\n    \n     def update_balance!\n        self.balance = self.account_entries.approved.sum(:amount)\n        self.save\n    end\n    \n    # def global_user\n    #     self.user.to_global_id if self.user.present?\n    # end\n\n    # def global_user=(user)\n    #     self.user = GlobalID::Locator.locate user\n    # end\n    \n\n        \n    \n    \nend\n","undoManager":{"mark":0,"position":3,"stack":[[{"group":"doc","deltas":[{"start":{"row":8,"column":1},"end":{"row":9,"column":1},"action":"insert","lines":["  balance      :decimal(, )","#"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":7},"end":{"row":22,"column":0},"action":"insert","lines":["",""]},{"start":{"row":22,"column":0},"end":{"row":22,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":4},"end":{"row":23,"column":0},"action":"insert","lines":["",""]},{"start":{"row":23,"column":0},"end":{"row":23,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":4},"end":{"row":26,"column":7},"action":"insert","lines":[" def update_balance!","        self.balance = self.account_entries.approved.sum(:amount)","        self.save","    end"]}]}]]},"ace":{"folds":[],"scrolltop":180,"scrollleft":0,"selection":{"start":{"row":24,"column":43},"end":{"row":24,"column":43},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":11,"state":"start","mode":"ace/mode/ruby"}},"timestamp":1428020543711}